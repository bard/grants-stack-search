app = "gitcoin-search-dev"
primary_region = "den"
kill_signal = "SIGINT"
kill_timeout = "5s"

[build]

[env]
  DEPLOYMENT_ENVIRONMENT = "production"
  PORT = "8000"
  STORAGE_DIR = "/tmp/data"
  APPLICATION_FILES_LOCATORS = "424:0x98720dD1925d34a2453ebC1F91C9d48E7e89ec29,424:0xd4CC0dd193c7DC1d665AE244cE12D7FAB337a008,10:0x5eB890e41c8D2cFF75ea942085E406bB90016561,10:0x4632ea15ba3C1a7e072996fb316EFefb8280381b,424:0xE60A569eC8aac2045d9fda306DC2a16CC1e52a90,10:0x6726FE9C89fb04eAEf388C11cF55Be6AA0a62fb9,10:0x79115c9114055f16bB5b0e9bbFA450844D0FCB3A,42161:0x3ac78e1Ae5086904d53b41c747188216789f59a7,10:0xC34745B3852DF32d5958BE88df2Bee0a83474001,10:0x4727E3265706c59dBc31e7c518960F4F843BB4da,10:0x7F9415761AfBd82E3Fe2FD9e878FA643184bC729,10:0x36F548e082B09b0CEC5B3f5A7b78953C75de5e74,10:0xC08008D47E3deb10b27fc1a75a96d97D11d58cF8,10:0x40511F88B87B69496A3471CdBe1d3d25ac68e408,10:0xc9A01d3d2505D9d2418DD2da64d06cf53fD403a0,10:0xB5C0939A9BB0C404b028D402493b86D9998af55e"
  BIND_ADDRESS = "0.0.0.0"
  HTTP_WORKERS = "4"
  ANONYMIZED_TELEMETRY = "False"
  # TODO change for production
  INDEXER_BASE_URL = "https://indexer-production.fly.dev"
  LOG_LEVEL = "DEBUG"

[[services]]
  protocol = "tcp"
  internal_port = 8000
  processes = ["app"]

  [[services.ports]]
    port = 80
    handlers = ["http"]
    force_https = true

  [[services.ports]]
    port = 443
    handlers = ["tls", "http"]
  [services.concurrency]
    type = "connections"
    hard_limit = 25
    soft_limit = 20
    
  [[services.http_checks]]
    grace_period = "30s"
    interval = "30s"
    path = "/health"
    timeout = "10s"
    method = "get"
    protocol = "http"
